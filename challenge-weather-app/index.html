<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  <title>Meteoropolis</title>
  <link rel="stylesheet" href="assets/globals.css">
  <link rel="stylesheet" href="assets/styles.css">
</head>

<body>
  <!-- Structure -->
  <main class="content">
    <header class="header">
      <h1 class="title">
        <i>Meteor</i>
        <i>opolis</i>
      </h1>
    </header>

    <figure class="photo" id="photo"></figure>

    <div class="info">
      <p class="info__item info__item--conditions" id="conditions"></p>
      <p class="info__item info__item--credits">
        <a href="#" id="credit-user"></a>
        <span>on</span>
        <a href="#" id="credit-platform">Unsplash</a>
      </p>
    </div>

    <div class="thumbs" id="thumbs"></div>

    <div class="controls">
      <form class="search" id="search">
        <label class="search__label" for="search-tf">City</label>
        <input class="search__input" id="search-tf" name="city" placeholder="Enter city name" autocomplete="city" />
        <button class="btn search__btn">Go</button>
      </form>
    </div>
  </main>

  <script>
//calling fetch from openweather
    const APIkey = "34956cbd72a572c480125b96f4273c59";
    let cityName = "london"
    const gallery = document.querySelector("#thumbs");

    const unsplashKey = "jNgiFSfeDWCdoJaMfHl46WAnO2kVZNgF7EIVDHA6uy0"

    let description;

    async function apiCall () {
      try {
        let response = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${cityName}&appid=${APIkey}`);
        let data = await response.json();
      }
      catch {(error => console.log(error))}
    
      return description = data.weather.description;
    }

    function getPhoto () {
     return fetch(`https://api.unsplash.com/photos/?query=${description}&client_id=${unsplashKey}`)
      .then(response => response.json())
      .then(photos => {
        photos.forEach(photo => {
          // console.log(photo)
          let imgElement = document.createElement("img");
          imgElement.src = photo.urls.thumb;
          gallery.appendChild(imgElement);
             })
            });
    }

    getPhoto();
// - [ ] Once you've retrieved the weather data, use its `description` property to get matching images from 
//Unsplash. You can see the documentation for image search at [https://unsplash.com/documentation#search-photos](https://unsplash.com/documentation#search-photos).

// - [ ] Display the images as a gallery of clickable thumbnails (clicking loads the main image)


// ## Stretch goals

// - [ ] Use the input field that lets us see what the weather is like in other cities

// - [ ] Add a feature of your choice

// - [ ] Display photographer credits in bottom right hand corner with link to their portfolio on Unsplash

// - [ ] Display white border around thumbnail of image currently displayed as main image using `active` class
  </script>
</body>

</html>
